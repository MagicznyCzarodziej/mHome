# Migration `20210126212745-reed-state-type`

This migration has been generated by Przemys≈Çaw Pitus at 1/26/2021, 10:27:46 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;
CREATE TABLE "new_Reed" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "description" TEXT,
    "state" TEXT NOT NULL DEFAULT 'CLOSED',
    "groupId" TEXT,
    "updatedAt" DATETIME NOT NULL,

    FOREIGN KEY ("groupId") REFERENCES "Group"("id") ON DELETE SET NULL ON UPDATE CASCADE
);
INSERT INTO "new_Reed" ("id", "name", "description", "state", "groupId", "updatedAt") SELECT "id", "name", "description", "state", "groupId", "updatedAt" FROM "Reed";
DROP TABLE "Reed";
ALTER TABLE "new_Reed" RENAME TO "Reed";
PRAGMA foreign_key_check;
PRAGMA foreign_keys=ON
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201022171248-integer-id..20210126212745-reed-state-type
--- datamodel.dml
+++ datamodel.dml
@@ -1,84 +1,84 @@
-datasource db {
-  provider = "sqlite"
-  url = "***"
-}
-
-generator client {
-  provider = "prisma-client-js"
-}
-
-//
-
-model Group {
-  id           String        @id
-  name         String
-  description  String?
-  icon         String?
-  lights       Light[]
-  thermometers Thermometer[]
-  blinds       Blinds[]
-  reeds        Reed[]
-}
-
-// Elements
-
-model Light {
-  id          Int      @id
-  name        String
-  description String?
-  state       String   @default("OFF") /// ON or OFF
-  group       Group?   @relation(fields: [groupId], references: [id])
-  groupId     String?
-  updatedAt   DateTime @updatedAt
-}
-
-model Thermometer {
-  id                Int           @id
-  name              String
-  description       String?
-  latestTemperature Float
-  temperatures      Temperature[]
-  group             Group?        @relation(fields: [groupId], references: [id])
-  groupId           String?
-}
-
-model Blinds {
-  id          Int      @id
-  name        String
-  description String?
-  state       Int /// 0-100 where 0 is fully closed and 100 is fully open
-  group       Group?   @relation(fields: [groupId], references: [id])
-  groupId     String?
-  updatedAt   DateTime @updatedAt
-}
-
-model Reed {
-  id          Int      @id
-  name        String
-  description String?
-  state       Int /// 0-100 where 0 is fully closed and 100 is fully open
-  group       Group?   @relation(fields: [groupId], references: [id])
-  groupId     String?
-  updatedAt   DateTime @updatedAt
-}
-
-//
-
-model Temperature {
-  id            Int         @id @default(autoincrement())
-  value         Float
-  datetime      DateTime    @default(now())
-  thermometer   Thermometer @relation(fields: [thermometerId], references: [id])
-  thermometerId Int
-}
-
-//
-
-/// Log every client connection
-model Connection {
-  id             Int       @id
-  ip             String
-  client         String
-  connectedAt    DateTime  @default(now())
-  disconnectedAt DateTime?
-}
+datasource db {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+//
+
+model Group {
+  id           String        @id
+  name         String
+  description  String?
+  icon         String?
+  lights       Light[]
+  thermometers Thermometer[]
+  blinds       Blinds[]
+  reeds        Reed[]
+}
+
+// Elements
+
+model Light {
+  id          Int      @id
+  name        String
+  description String?
+  state       String   @default("OFF") /// ON or OFF
+  group       Group?   @relation(fields: [groupId], references: [id])
+  groupId     String?
+  updatedAt   DateTime @updatedAt
+}
+
+model Thermometer {
+  id                Int           @id
+  name              String
+  description       String?
+  latestTemperature Float
+  temperatures      Temperature[]
+  group             Group?        @relation(fields: [groupId], references: [id])
+  groupId           String?
+}
+
+model Blinds {
+  id          Int      @id
+  name        String
+  description String?
+  state       Int /// 0-100 where 0 is fully closed and 100 is fully open
+  group       Group?   @relation(fields: [groupId], references: [id])
+  groupId     String?
+  updatedAt   DateTime @updatedAt
+}
+
+model Reed {
+  id          Int      @id
+  name        String
+  description String?
+  state       String   @default("CLOSED") /// OPEN or CLOSED
+  group       Group?   @relation(fields: [groupId], references: [id])
+  groupId     String?
+  updatedAt   DateTime @updatedAt
+}
+
+//
+
+model Temperature {
+  id            Int         @id @default(autoincrement())
+  value         Float
+  datetime      DateTime    @default(now())
+  thermometer   Thermometer @relation(fields: [thermometerId], references: [id])
+  thermometerId Int
+}
+
+//
+
+/// Log every client connection
+model Connection {
+  id             Int       @id
+  ip             String
+  client         String
+  connectedAt    DateTime  @default(now())
+  disconnectedAt DateTime?
+}
```


